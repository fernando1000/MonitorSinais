// Tables

/*
 * Bootstrap variables
 */
@table-cell-padding: 12px;
@table-condensed-cell-padding: 5px;
@table-bg: #ffffff;
@table-bg-accent: #fafcfd;
@table-bg-hover: @gray-light;
@table-bg-active: @gray-light;
@table-border-color: @gray-lighter;
@table-bg-highlight: @color-highlight-lightest;

.table-active-styling() {
  background-color: transparent;
  box-shadow:
    inset 0 2px 0 0 @brand-primary,
    inset 0 -2px 0 0 @brand-primary,
    inset 0 500px 0 0 @table-bg-highlight;

  &:first-child {
    box-shadow:
      inset 0 2px 0 0 @brand-primary,
      inset 0 -2px 0 0 @brand-primary,
      inset 2px 0 0 0 @brand-primary,
      inset 0 500px 0 0 @table-bg-highlight;
  }

  &:last-child {
    box-shadow:
      inset 0 2px 0 0 @brand-primary,
      inset -2px 0 0 0 @brand-primary,
      inset 0 -2px 0 0 @brand-primary,
      inset 0 500px 0 0 @table-bg-highlight;
  }
}

// States
.table-state(@state, @color, @hoverable) {
  &.@{state} {
    & when (@hoverable = true) {
      &:hover > td:first-child {
        box-shadow:
          inset 5px 0 0 0 @color,
          inset 0 500px 0 0 @table-bg-highlight;
      }
    }

    &.active > td:first-child {
      box-shadow:
        inset 5px 0 0 0 @color,
        inset 0 2px 0 0 @brand-primary,
        inset 0 -2px 0 0 @brand-primary,
        inset 0 500px 0 0 @table-bg-highlight;
    }

    > td {
      background-color: transparent !important;
      &:first-child {
        box-shadow: inset 5px 0 0 0 @color;
      }
    }
  }
}

.table {
  background-color: transparent;

  > thead > tr {
    background-color: transparent;

    > th {
      border-bottom: 2px solid @table-border-color;
      font-weight: 300;
    }
  }

  > tbody > tr {
    background-color: @table-bg;
    .table-state(info, @brand-info, false);
    .table-state(warning, @brand-warning, false);
    .table-state(success, @brand-success, false);
    .table-state(danger, @brand-danger, false);

    th, td {
      &:not([class*="bg-"]) {
        background-color: transparent;
      }
    }

    &:last-child {
      border-bottom: 1px solid @table-border-color;
    }

    td {
      vertical-align: middle;

      &:focus,
      &:active:focus {
        outline: 0;
      }
    }

    &.active {
      td {
        .table-active-styling();
      }
    }
  }

  // Zebra-striping
  &.table-striped {
    > tbody > tr:nth-of-type(odd) {
      background-color: darken(@table-bg, 2%);

      &.extendedRow {
        background-color: #ffffff;
      }
    }
  }

  // Hover effect
  &.table-hover {
    > tbody > tr {
      .table-state(info, @brand-info, true);
      .table-state(warning, @brand-warning, true);
      .table-state(success, @brand-success, true);
      .table-state(danger, @brand-danger, true);

      &:hover {
        background-color: @table-bg;

        td:not([class*="bg-"]) {
          box-shadow:
            inset 0 500px 0 0 @table-bg-highlight;
        }
      }
      &.active:hover {
        td {
          .table-active-styling();
        }
      }
    }
  }

  .extendedRow {
    td {
      border-top: 0;
    }
  }

  .formatExpander {
    &.animate {
      transition: transform 0.2s ease-in-out;
    }

    &.open {
      transform: rotate(180deg);
    }
  }
}

.table-bordered {
  border: none;
  border-collapse: separate;

  > thead > tr > th,
  > tbody > tr > td {
    border: none;
    border-top: 4px solid @table-border-color;
  }

  > tbody > tr:last-child {
    border-bottom: 4px solid @table-border-color;
  }

  > tbody > tr > td {
    vertical-align: middle;
  }
}

.table > thead > tr > th,
.table > tbody > tr > th,
.table > tfoot > tr > th,
.table > thead > tr > td,
.table > tbody > tr > td,
.table > tfoot > tr > td {
  padding: 12px;
}

.table-condensed > thead > tr > th,
.table-condensed > tbody > tr > th,
.table-condensed > tfoot > tr > th,
.table-condensed > thead > tr > td,
.table-condensed > tbody > tr > td,
.table-condensed > tfoot > tr > td {
  padding: 7px;
}

.table .checkboxWrapper > label {
  margin-bottom: 0;
}
